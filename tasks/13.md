---
completed: '2025-11-11T23:18:03.444111+00:00'
created: '2025-11-11T20:24:54.496385+00:00'
status: done
---

# Implement update command for CLI and MCP

Add programmatic update functionality to allow updating specific task fields via CLI flags and MCP.

## Implementation Steps

### 1. Core Business Logic (quadro/command.py)
- Add new `update_task()` function that accepts:
  - `task_id` (required)
  - `title` (optional)
  - `description` (optional)
  - `milestone` (optional)
- Function should load existing task, update only provided fields, preserve others, and save
- Return the updated Task object
- Raise TaskNotFoundError if task doesn't exist

### 2. CLI Command (quadro/cli.py)
- Add new `@main.command("update")` with:
  - `task_id` argument (required)
  - `--title` option (optional)
  - `--description/-d` option (optional)
  - `--milestone` option (optional, with 'root' to clear milestone)
- Validate at least one update field is provided
- Use `@handle_exceptions` decorator for error handling
- Display success message with updated task info
- Example: `quadro update 5 --title "New Title" --milestone mvp`

### 3. MCP Tool (quadro/mcp.py)
- Add new `@mcp.tool()` decorator for `update_task()`
- Parameters match command.py function signature
- Use Annotated types with Field descriptions
- Return updated Task object
- Tool description: "Update task fields (title, description, milestone)"

### 4. Testing
- **test_command.py**: Test update_task function with various combinations
- **test_cli.py**: Test CLI update command with Click's CliRunner
- **test_mcp.py**: Test MCP update_task tool
- Cover edge cases: non-existent task, no fields provided, updating milestone to root

### 5. Documentation
- Add docstring examples to CLI command
- Update help text to clarify optional parameters
- Ensure type hints are complete for mypy strict mode

## Key Design Decisions
- Unlike `edit`, this allows non-interactive programmatic updates
- All update fields are optional, but at least one must be provided
- Milestone can be set to "root" to clear it (consistent with `move` command)
- The existing `update_task_from_markdown` function remains for editor-based updates
